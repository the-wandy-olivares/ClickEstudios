
{% load humanize %}

<style>
      #div-reserv 
      {
            border-radius: 2rem !important;
            height: max-content !important;
            max-height: 90vh;
            width: 100% ;
      
      }
      .list-group-item 
      {
            background-color: transparent;
            border-color: rgb(46, 46, 46);
            border-radius: 1rem;
            color: white;
      }
      .span 
      {
            color: rgba(255, 255, 255, 0.844);
            font-size: 14px;
      }


      .slide-out-elliptic-top-bck {
	-webkit-animation: slide-out-elliptic-top-bck 0.7s ease-in both;
	        animation: slide-out-elliptic-top-bck 0.7s ease-in both;
}
/* ----------------------------------------------
 * Generated by Animista on 2024-6-17 11:26:27
 * Licensed under FreeBSD License.
 * See http://animista.net/license for more info. 
 * w: http://animista.net, t: @cssanimista
 * ---------------------------------------------- */

/**
 * ----------------------------------------
 * animation slide-out-elliptic-top-bck
 * ----------------------------------------
 */
 @-webkit-keyframes slide-out-elliptic-top-bck {
  0% {
    -webkit-transform: translateY(0) rotateX(0) scale(1);
            transform: translateY(0) rotateX(0) scale(1);
    -webkit-transform-origin: 50% 1400px;
            transform-origin: 50% 1400px;
    opacity: 1;
  }
  100% {
    -webkit-transform: translateY(-600px) rotateX(-30deg) scale(0);
            transform: translateY(-600px) rotateX(-30deg) scale(0);
    -webkit-transform-origin: 50% 100%;
            transform-origin: 50% 100%;
    opacity: 1;
  }
}
@keyframes slide-out-elliptic-top-bck {
  0% {
    -webkit-transform: translateY(0) rotateX(0) scale(1);
            transform: translateY(0) rotateX(0) scale(1);
    -webkit-transform-origin: 50% 1400px;
            transform-origin: 50% 1400px;
    opacity: 1;
  }
  100% {
    -webkit-transform: translateY(-600px) rotateX(-30deg) scale(0);
            transform: translateY(-600px) rotateX(-30deg) scale(0);
    -webkit-transform-origin: 50% 100%;
            transform-origin: 50% 100%;
    opacity: 1;
  }
}


.slide-out-elliptic-bottom-bck {
	-webkit-animation: slide-out-elliptic-bottom-bck 0.7s ease-in both;
	        animation: slide-out-elliptic-bottom-bck 0.7s ease-in both;
}

/* ----------------------------------------------
 * Generated by Animista on 2024-6-17 12:21:11
 * Licensed under FreeBSD License.
 * See http://animista.net/license for more info. 
 * w: http://animista.net, t: @cssanimista
 * ---------------------------------------------- */

/**
 * ----------------------------------------
 * animation slide-out-elliptic-bottom-bck
 * ----------------------------------------
 */
 @-webkit-keyframes slide-out-elliptic-bottom-bck {
  0% {
    -webkit-transform: translateY(0) rotateX(0) scale(1);
            transform: translateY(0) rotateX(0) scale(1);
    -webkit-transform-origin: 50% -1400px;
            transform-origin: 50% -1400px;
    opacity: 1;
  }
  100% {
    -webkit-transform: translateY(600px) rotateX(30deg) scale(0);
            transform: translateY(600px) rotateX(30deg) scale(0);
    -webkit-transform-origin: 50% 100%;
            transform-origin: 50% 100%;
    opacity: 1;
  }
}
@keyframes slide-out-elliptic-bottom-bck {
  0% {
    -webkit-transform: translateY(0) rotateX(0) scale(1);
            transform: translateY(0) rotateX(0) scale(1);
    -webkit-transform-origin: 50% -1400px;
            transform-origin: 50% -1400px;
    opacity: 1;
  }
  100% {
    -webkit-transform: translateY(600px) rotateX(30deg) scale(0);
            transform: translateY(600px) rotateX(30deg) scale(0);
    -webkit-transform-origin: 50% 100%;
            transform-origin: 50% 100%;
    opacity: 1;
  }
}

</style>

<section id="div-reserv"  class=" p-1 overflow-auto   d-flex flex-wrap   w-100">
<div class="border-0 font-secundary  w-100 d-flex">
     <div class='w-100 border-0 d-flex justify-content-center position-relative' >
      <div class="border-0 mt-4  w-100">
            <h6 class="w-100 font-secundary  d-flex" style="font-size: 14px;"~>
                  <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" class="bi bi-heart-fill me-1 mt-1" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314"/>
                      </svg>  Citas reservadas
            </h6>
            <p class=" text-white-50 font-secundary ms-3" style="font-size: 14px;">
                  Los usuarios pueden utilizar la lista de reservas para organizar y gestionar sus  citas
            </p>
      </div>
      

     </div>
</div>
{% if c_reserver %}
      {% for cr in c_reserver %}
      <ul id='ul{{cr.id}}' class="list-group m-1 mt-2  bg-black bg-opacity-50  " 
      style="border-radius: 1.5rem; max-width: 20rem;">
      <li class=" list-group-item mt-1 border-0">
            <div class="d-flex flex-wrap w-100 border-0">
                  <span class="w-100 font-primary"> {{cr.name}}  </span>
                  <span class="w-100 d-flex align-content-center ">
                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" class="bi mt-1 me-1 bi-telephone-fill" viewBox="0 0 16 16">
                              <path fill-rule="evenodd" d="M1.885.511a1.745 1.745 0 0 1 2.61.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.68.68 0 0 0 .178.643l2.457 2.457a.68.68 0 0 0 .644.178l2.189-.547a1.75 1.75 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.6 18.6 0 0 1-7.01-4.42 18.6 18.6 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877z"/>
                            </svg> {{cr.number}} </span>
                  <span class=" span w-100 d-flex align-content-center "> 
                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" class="bi mt-1 me-1 bi-envelope-at-fill" viewBox="0 0 16 16">
                              <path d="M2 2A2 2 0 0 0 .05 3.555L8 8.414l7.95-4.859A2 2 0 0 0 14 2zm-2 9.8V4.698l5.803 3.546zm6.761-2.97-6.57 4.026A2 2 0 0 0 2 14h6.256A4.5 4.5 0 0 1 8 12.5a4.49 4.49 0 0 1 1.606-3.446l-.367-.225L8 9.586zM16 9.671V4.697l-5.803 3.546.338.208A4.5 4.5 0 0 1 12.5 8c1.414 0 2.675.652 3.5 1.671"/>
                              <path d="M15.834 12.244c0 1.168-.577 2.025-1.587 2.025-.503 0-1.002-.228-1.12-.648h-.043c-.118.416-.543.643-1.015.643-.77 0-1.259-.542-1.259-1.434v-.529c0-.844.481-1.4 1.26-1.4.585 0 .87.333.953.63h.03v-.568h.905v2.19c0 .272.18.42.411.42.315 0 .639-.415.639-1.39v-.118c0-1.277-.95-2.326-2.484-2.326h-.04c-1.582 0-2.64 1.067-2.64 2.724v.157c0 1.867 1.237 2.654 2.57 2.654h.045c.507 0 .935-.07 1.18-.18v.731c-.219.1-.643.175-1.237.175h-.044C10.438 16 9 14.82 9 12.646v-.214C9 10.36 10.421 9 12.485 9h.035c2.12 0 3.314 1.43 3.314 3.034zm-4.04.21v.227c0 .586.227.8.581.8.31 0 .564-.17.564-.743v-.367c0-.516-.275-.708-.572-.708-.346 0-.573.245-.573.791"/>
                            </svg> {{cr.email}} </span>
                  <span class=" span w-100 d-flex align-content-center ">
                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" class="bi mt-1 me-1 bi-calendar2-week-fill" viewBox="0 0 16 16">
                              <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5m9.954 3H2.545c-.3 0-.545.224-.545.5v1c0 .276.244.5.545.5h10.91c.3 0 .545-.224.545-.5v-1c0-.276-.244-.5-.546-.5M8.5 7a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm3 0a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zM3 10.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5m3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5z"/>
                            </svg> {{ cr.date_choice|date:"d/M/Y" }} - {{cr.date_time_choice}}</span>
 
                  
                            <span class='span w-100 d-flex align-content-center '>
                              <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" class="m-0 mt-1 me-1 p-0 me-1 bi bi-cash-coin" viewBox="0 0 16 16">
                                    <path fill-rule="evenodd" d="M11 15a4 4 0 1 0 0-8 4 4 0 0 0 0 8m5-4a5 5 0 1 1-10 0 5 5 0 0 1 10 0"/>
                                    <path d="M9.438 11.944c.047.596.518 1.06 1.363 1.116v.44h.375v-.443c.875-.061 1.386-.529 1.386-1.207 0-.618-.39-.936-1.09-1.1l-.296-.07v-1.2c.376.043.614.248.671.532h.658c-.047-.575-.54-1.024-1.329-1.073V8.5h-.375v.45c-.747.073-1.255.522-1.255 1.158 0 .562.378.92 1.007 1.066l.248.061v1.272c-.384-.058-.639-.27-.696-.563h-.668zm1.36-1.354c-.369-.085-.569-.26-.569-.522 0-.294.216-.514.572-.578v1.1zm.432.746c.449.104.655.272.655.569 0 .339-.257.571-.709.614v-1.195z"/>
                                    <path d="M1 0a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h4.083q.088-.517.258-1H3a2 2 0 0 0-2-2V3a2 2 0 0 0 2-2h10a2 2 0 0 0 2 2v3.528c.38.34.717.728 1 1.154V1a1 1 0 0 0-1-1z"/>
                                    <path d="M9.998 5.083 10 5a2 2 0 1 0-3.132 1.65 6 6 0 0 1 3.13-1.567"/>
                                  </svg> <strong></strong>  {{cr.plans.name}}</span>
                  <span class=" span w-100 d-flex align-content-center ">
                        <span>
                              <strong>    <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" class="bi bi-currency-dollar mt-1 me-1" viewBox="0 0 16 16">
                                    <path d="M4 10.781c.148 1.667 1.513 2.85 3.591 3.003V15h1.043v-1.216c2.27-.179 3.678-1.438 3.678-3.3 0-1.59-.947-2.51-2.956-3.028l-.722-.187V3.467c1.122.11 1.879.714 2.07 1.616h1.47c-.166-1.6-1.54-2.748-3.54-2.875V1H7.591v1.233c-1.939.23-3.27 1.472-3.27 3.156 0 1.454.966 2.483 2.661 2.917l.61.162v4.031c-1.149-.17-1.94-.8-2.131-1.718zm3.391-3.836c-1.043-.263-1.6-.825-1.6-1.616 0-.944.704-1.641 1.8-1.828v3.495l-.2-.05zm1.591 1.872c1.287.323 1.852.859 1.852 1.769 0 1.097-.826 1.828-2.2 1.939V8.73z"/>
                                  </svg> </strong>  RD${{cr.plans.price|intcomma}}.00
                            </span>
                  </span>
                  <span class=" span w-100 "> 
                        El monto de reservacion es de ${{cr.reserver_mount|intcomma}} </span>
                  <div class='w-100 border-0'>
                        <hr class=''>
                  </div>
                  <span class=" span w-100 d-flex justify-content-end">
                        <button onclick="SaleCancel(this.id)" id="{{cr.id}}" class='border-0 rounded-4 font-primary' 
                        style=' 
                        font-size: 16px; width: 7rem;'>Cancelar</button>
                        <button  onclick="SaleService(this.id)" id="{{cr.id}}" class='border-0 rounded-4 font-primary' 
                        style='  background-image: linear-gradient(120deg, #fbaaff 0%, #bca1ff 100%);-webkit-background-clip: text; -webkit-text-fill-color: transparent;
                        font-size: 16px;'>Vender Servicio</button>
                  </span>
                  <span class=" span w-100 mt-2 d-flex justify-content-center">
                  </span>
            </div>
      </li>
</ul>


{% endfor %}
<script>
      function SaleService(C){
            document.getElementById( 'ul' +C).classList.add('slide-out-elliptic-top-bck');
            setTimeout(() => {
            console.log(document.getElementById( 'ul' +C)).style.display = 'none';
      }, 500);

      $.ajax({
            url: '/sale-service/',
            data: {
                  id: C
            }
      })
}      

function SaleCancel(C){
            document.getElementById( 'ul' +C).classList.add('slide-out-elliptic-bottom-bck');
            setTimeout(() => {
            console.log(document.getElementById( 'ul' +C)).style.display = 'none';
      }, 500);


      setTimeout(() => {
            $.ajax({
            url: '/sale-cancel/',
            data: {
                  id: C
            },
                    success: function(response) {
                              location.reload();
                    }
      })
      }, 1000);
}      

// Mejoras
</script>
{% else %}
<div class="alert alert-warning m-3 p-3 "  style="max-width: 30rem; 
border-radius: 1.5rem;" role="alert">
<strong>¡Aviso!</strong> 
      <p class="text-black-50 " style="line-height: 16px; font-size: 14px;"> No hay citas registradas,
       cuando un usuario reserve una cita, esta sera visible aqui.
      </p>
</div>
{% endif %}
</section>